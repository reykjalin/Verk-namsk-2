@model IEnumerable<MooshakV2.ViewModels.AssignmentViewModel>

@{
    ViewBag.Title = "Assignment List";
}

<h2>Assignments</h2>

@using (Html.BeginForm("listAssignmentsInCourse", "Assignment", FormMethod.Get, new { @class = "form-inline" }))
{
    <div class="input-group">
        <a href="@Url.Action("Create")" 
           class="btn btn-default" 
           data-tooltip="true" 
           data-placement="right" 
           title="Create new user">
           <span class="glyphicon glyphicon-plus" id="createUserIcon" aria-hidden="true"></span>
        </a>
            @Html.DropDownList("id", ViewData["Courselist"] as IEnumerable<SelectListItem>,
            new { @class = "form-control" })
        
            <input type="text" class="form-control" placeholder="Recipient's username" aria-describedby="basic-addon2">
            <span class="input-group-addon" id="basic-addon2">example.com</span>
        
    </div>
}


<br />


<table class="table table-hover">
    <tr>
        <th>
            Title
        </th>
        <th>
            Description
        </th>
        <th>
            Weight
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.title)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.weight)
        </td>
        <td class="right">
            <div class="btn-group btn-group-sm" role="group" aria-label="...">
                <a href="@Url.Action("Edit", new { id = item.id })"
                    class="btn btn-default"
                    data-tooltip="true"
                    data-placement="left"
                    title="Edit assignment information">
                    <span id="but" class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
                <button type="button"
                        class="btn btn-default modalEditButton"
                        data-tooltip="true"
                        data-placement="top"
                        title="Assignment edit"
                        data-toggle="modal"
                        data-target="#assignmentEdit"
                        data-title="@item.title"
                        data-descr="@item.description"
                        data-weight="@item.weight"
                        data-courseId="@item.courseId"
                        data-id="@item.id">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </button>
                <button type="button"
                        class="btn btn-default modalDetailButton"
                        data-tooltip="true"
                        data-placement="top"
                        title="Assignment details"
                        data-toggle="modal"
                        data-target="#assignmentDetails"
                        data-title="@item.title"
                        data-descr="@item.description"
                        data-weight="@item.weight"
                        data-courseId="@item.courseId">
                    <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
                </button>
                <button type="button"
                        class="btn btn-default modalDeleteButton"
                        data-tooltip="true"
                        data-placement="right"
                        title="Delete assignment"
                        data-toggle="modal"
                        data-target="#deleteAssignment"
                        data-title="@item.title"
                        data-descr="@item.description"
                        data-weight="@item.weight"
                        data-courseId="@item.courseId"
                        data-id="@item.id">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </button>
                <button type="button"
                        class="btn btn-default"
                        data-tooltip="true"
                        data-placement="top"
                        title="Assignment hand in"
                        data-toggle="modal"
                        data-target="#handin">
                    <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
                </button>
            </div>
        </td>
    </tr>
        }

</table>

<!-- Assignment Edit Modal -->
<div class="modal fade" id="assignmentEdit" tabindex="-1" role="dialog" aria-labelledby="assignmentEditLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            @using (Html.BeginForm("Edit", "Course", FormMethod.Post, new { @id="editAssignmentForm" }))
            {
            @Html.AntiForgeryToken();
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Edit Assignment</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <dt>
                        Title
                    </dt>
                    <dd>
                        <input type="text" id="assignmentTitleEdit" class="form-control" />
                    </dd>
                </div>
                <div class="form-group">
                    <dt>
                        Description
                    </dt>
                    <dd>
                        <textarea id="assignmentDescrEdit" name="assignmentDescriptionEdit" class="form-control" rows="6"></textarea>
                    </dd>
                </div>
                <div class="form-group">
                    <dt>
                        Weight
                    </dt>
                    <dd>
                        <input type="text" id="assignmentWeightEdit" class="form-control" />
                    </dd>
                </div>
                <div class="form-group">
                    <dt>
                        Course ID
                    </dt>
                    <dd>
                        <input type="text" id="assignmentCourseIdEdit" class="form-control" />
                        @*@Html.DropDownListFor(model => model.courseId, ViewData["Courselist"] as IEnumerable<SelectListItem>, new { @class = "form-control" } )*@
                            <select>
                                <option>Gagnasafnsfræði</option>
                            </select>
</dd>
                </div>
            </div>

            <input type="hidden" id="getId" />
            <div class="modal-footer">
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <div class="btn-group btn-group" role="group" aria-label="...">
                            <button type="button"
                                    class="btn btn-default"
                                    data-dismiss="modal"
                                    title="Cancel">
                                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                Cancel
                            </button>
                            <button type="submit"
                                    class="btn btn-default"
                                    data-tooltip="true"
                                    data-placement="top"
                                    title="Save">
                                <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
                                Save
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            }
        </div>
    </div>
</div>

<!-- Assignment Detail Modal -->
<div class="modal fade" id="assignmentDetails" tabindex="-1" role="dialog" aria-labelledby="assignmentDetailsLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="assignmentTitle"></h4>
            </div>
            <div class="modal-body">
                <dt>
                    Description
                </dt>
                <dd id="assignmentDescr"></dd>
                <dt>
                    Weight
                </dt>
                <dd id="assignmentWeight"></dd>
                <dt>
                    ID
                </dt>
                <dd id="courseId"></dd>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Assignment Modal -->
<div class="modal fade" id="deleteAssignment" tabindex="-1" role="dialog" aria-labelledby="deleteAssignmentLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            @using (Html.BeginForm("Delete", "Assignment", FormMethod.Post, new { @id="deleteAssignmentForm" }))
            {
            @Html.AntiForgeryToken();

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="assignmentDelTitle"></h4>
            </div>
            <div class="modal-body">
                <dt>
                    Description
                </dt>
                <dd id="assignmentDelDescr"></dd>
                <dt>
                    Weight
                </dt>
                <dd id="assignmentDelWeight"></dd>
                <dt>
                    Course ID
                </dt>
                <dd id="courseDelId"></dd>
            </div>

            <input type="hidden" id="deleteId" />

            <div class="modal-footer">
                <button class="btn btn-default" type="submit" value="Delete" id="delBut">
                    <span class="glyphicon glyphicon-trash"></span>
                    Delete Assignment
                </button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    Close
                </button>
            </div>
            }
        </div>
    </div>
</div>

<!--  Hand in Modal -->
<div class="modal fade" id="handin" tabindex="-1" role="dialog" aria-labelledby="assignmentDetailsLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" >Hand in</h4>
            </div>
            <div class="modal-body">
               @using (Html.BeginForm("uploadFile", "Assignment", FormMethod.Post, new { enctype = "multipart/form-data" }))
               {

                @Html.ValidationSummary();
                <table>
                    <tr>
                        <td>File:</td>
                        <td><input type="file" name="file" id="file" /></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td><input type="submit" name="submit" value="Hand in" /></td>
                    </tr>
                </table>
               }

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

@section scripts
{
    @Scripts.Render("~/Scripts/renderTooltips.js")
    @Scripts.Render("~/Scripts/AssignmentDetailModal.js")
    @Scripts.Render("~/Scripts/AssignmentDeleteModal.js")
    @Scripts.Render("~/Scripts/AssignmentEditModal.js")
}
